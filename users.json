const fs = require('fs')
const path = require('path')

function saveUser(user) {
  const filePath = path.join(__dirname, 'users.json')
  let users = []
  try {
    const data = fs.readFileSync(filePath)
    users = JSON.parse(data)
  } catch (e) {
    // Si no existe o error, usamos array vacÃ­o
  }
  // Verificar si usuario ya existe
  if (!users.find(u => u.id === user.id)) {
    users.push(user)
    fs.writeFileSync(filePath, JSON.stringify(users, null, 2))
  }
}
